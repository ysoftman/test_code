port 27001
protected-mode no
daemonize yes
pidfile "sentinel27001.pid"
logfile "sentinel27001.log"
# 마스터 노드 모두를 모니터링 한다.
# 3개의 sentinel 중 2개이상(quorum(정족수),과반수) 마스터 내려갔음을 인지해야 동작(slave->master승격)하도록 한다.
sentinel monitor redis2 127.0.0.1 7005 2
sentinel monitor redis3 127.0.0.1 7003 2
sentinel monitor redis1 127.0.0.1 7001 2
# redis master 접속에 암호가 필요한경우
sentinel auth-pass redis2 ysoftmanPassword123
sentinel auth-pass redis3 ysoftmanPassword123
sentinel auth-pass redis1 ysoftmanPassword123
# redis master 가 10 초동안 응답없으면 다운으로 인지
# 참고로 디폴트 30초,디폴트값이면 sentinel 시작시 .conf 재작성할때 이설정은 삭제된다.
sentinel down-after-milliseconds redis2 10000
sentinel down-after-milliseconds redis3 10000
sentinel down-after-milliseconds redis1 10000
# 장애조치(failover) 120초 동안 응답이 없으면 취소한다.
# 참고로 디폴트 180초,디폴트값이면 sentinel 시작시 .conf 재작성할때 이설정은 삭제된다.
sentinel failover-timeout redis2 120000
sentinel failover-timeout redis3 120000
sentinel failover-timeout redis1 120000
# redis 장애 인지시 노티에 사용할 스크립트
sentinel notification-script redis1 sentinel-notify.sh
# Generated by CONFIG REWRITE
user default on nopass ~* &* +@all
dir "/Users/ysoftman/workspace/test_code/redis"
sentinel myid 5f24c527e6226acf281f64f2f58de17b0b146982
sentinel config-epoch redis2 0
sentinel leader-epoch redis2 0
sentinel config-epoch redis3 0
sentinel leader-epoch redis3 0
sentinel config-epoch redis1 0
sentinel leader-epoch redis1 0
sentinel current-epoch 0
sentinel known-replica redis3 127.0.0.1 7006
sentinel known-replica redis1 127.0.0.1 7004
sentinel known-sentinel redis2 127.0.0.1 27003 c08c364cd6492e7d34f7685b78b42b25e24c8a91
sentinel known-sentinel redis2 127.0.0.1 27002 e72ce498e5bb466f5c27592a09bc4f35e0f6ceaf
sentinel known-sentinel redis3 127.0.0.1 27003 c08c364cd6492e7d34f7685b78b42b25e24c8a91
sentinel known-sentinel redis3 127.0.0.1 27002 e72ce498e5bb466f5c27592a09bc4f35e0f6ceaf
sentinel known-sentinel redis1 127.0.0.1 27003 c08c364cd6492e7d34f7685b78b42b25e24c8a91
sentinel known-sentinel redis1 127.0.0.1 27002 e72ce498e5bb466f5c27592a09bc4f35e0f6ceaf
